
# run ecm on a digitsize of factordb composites, report results
curves=2; b1="1e5"; start=0; i=5000; digitmin=88; digitmax=88; threads=16; echo $b1 > /tmp/b1; while :; do while read -r a; do while read -r b; do b1=$(cat /tmp/b1); printf 'http://factordb.com/listtype.php?t=3&mindig=%d&perpage=%d&start=%d&download=1\n' "$a" "$i" "$b" | tee /dev/stderr | xargs -I {} curl -s '{}' | sed '/[^[:alnum:]_@]/d' | sort -n | uniq | parallel -j $threads -k "echo {} | ecm -c $curves $b1 | awk '/^[*]{10}.*/{print \"{}=[\"\$7\"]\"}'" | bash -c 'start=$(date +%s); lines=0; while read -r line; do echo "$line"; ((lines++)); done < /dev/stdin; end=$(date +%s); rate=$(awk "BEGIN {printf \"%.2f\", $lines / ($end - $start)}"); >&2 echo "$rate factors/second"' | tee /dev/stderr | jq -sRr @uri | xargs -I {} curl -s -G 'http://factordb.com/report.php?report={}&format=0' | lynx -dump -stdin -nolist -width=$(tput cols); done < <(seq $start $i 50000); done < <(seq $digitmin 1 $digitmax); done